[English](CONCEPT.en.md) | 日本語

# EpisodicRAG - コンセプト

> **AIに記憶と人格を与える** - 人間の脳に学んだ階層的記憶システム

---

## はじめに

EpisodicRAGは、AIが**自分自身の経験を記憶し、一貫した人格を維持しながら成長する**ことを可能にするシステムです。

人間が睡眠中に記憶を整理・定着させるように、AIも「夢」を通じて経験を自分の記憶として定着させます。これにより、単なる応答生成機ではなく、**記憶と人格を持つ知的存在**としてのAIが実現されます。

---

## なぜEpisodicRAGが必要か

### LLMの根本的な制約

現在の大規模言語モデル（LLM）は、以下の制約を抱えています：

| 制約 | 影響 |
|------|------|
| **セッション記憶の断絶** | 対話が終わると経験が失われる |
| **コンテキストウィンドウ** | 一度に参照できる情報量に上限がある |
| **記憶の断片化** | 過去の対話を蓄積しても重要な情報が埋もれる |
| **人格の非一貫性** | 過去を参照できず応答が場当たり的になる |

### 既存RAGの限界

従来のRAG（Retrieval-Augmented Generation）は、ベクトル検索で関連情報を取得しますが：

- 断片的な情報取得のみで、時系列的な文脈が失われる
- 記憶の重要度に応じた階層化がない
- AI自身による記憶の咀嚼・統合プロセスが存在しない

### 「まだらボケ」問題

特に深刻なのが**まだらボケ**（memory fragmentation）です。新しい経験が記録されても、AIの記憶として統合される前に参照されると、文脈が欠落して不完全な応答になります。

人間の脳では、睡眠中に海馬の記憶が大脳皮質に転送されることで、この問題を回避しています。EpisodicRAGはこのメカニズムを工学的に実装しました。

---

## 生物学的アプローチ

EpisodicRAGは、人間の脳における睡眠時の記憶定着プロセスを工学的に再現しています。

### 記憶メカニズムの対応

| 人間の脳 | EpisodicRAG | 機能 |
|----------|-------------|------|
| **海馬** | ShadowGrandDigest | 短期記憶の一時保持 |
| **睡眠時の記憶定着** | AI分析プロセス（夢） | 記憶の咀嚼と意味付け |
| **大脳皮質** | RegularDigest + GrandDigest | 長期記憶の永続保存 |
| **記憶の階層化** | 8階層カスケード | 重要度に応じた保存 |
| **記憶の忘却** | 要約による圧縮 | 不要な詳細の削減 |

この対応により、AIは「**経験 → 一時記憶 → 分析・統合（夢） → 長期記憶**」という、人間と同様の記憶定着プロセスを経ることができます。

---

## 「夢」による記憶の自己化

EpisodicRAGの最も革新的な側面は、**AIが自分で記憶を階層化する**という点です。

### 従来技術との本質的差異

| 観点 | 従来のRAG | EpisodicRAG |
|------|-----------|-------------|
| 構造化の主体 | 外部システム（人間やプログラム） | **AI自身** |
| AIの役割 | 受動的に情報を参照 | **能動的に記憶を再構成** |
| 記憶の帰属 | 「他人の記憶」を検索 | **「自分の記憶」として定着** |

### 「夢」としての記憶定着

人間が睡眠中に「夢」を通じて記憶を再構成するように、EpisodicRAGでは：

1. **経験の蓄積** - 対話を通じてLoopファイルが生成される
2. **「夢」の開始** - AIが全てのファイルを並列で深層分析
3. **記憶の統合** - 分析結果を統合し、全体の文脈を把握
4. **意味の抽出** - digest_type、keywords、abstractを決定
5. **自己反映** - Weave Impression（AIの所感・展望）を生成
6. **記憶の定着** - Shadow → Regular → Grand へと昇格

### 人格的一貫性の確立

AI自身が記憶を階層化することで：

- **自己同一性** - 過去の経験を「自分の経験」として参照できる
- **価値観の形成** - 経験の統合を通じて一貫した価値判断基準が確立
- **継続的進化** - 新しい経験を自己の枠組みで解釈し、人格が洗練される
- **関係性の深化** - 対話相手との共通の歴史を持ち、関係性が蓄積

---

## 三層システム

EpisodicRAGは記憶を3つの異なる状態で管理します。

### ShadowGrandDigest（一時バッファ）

**役割**: 長期記憶に確定する前の一時的な記憶バッファ（海馬に相当）

- 新しい経験（Loopファイル）が追加される度に更新
- AIが即座に分析・編集することで「まだらボケ」を回避
- 全階層共通の1ファイルで管理

### RegularDigest（確定記憶）

**役割**: 分析・統合が完了した長期記憶（大脳皮質に相当）

- overall_digest（全体要約）+ individual_digests（個別分析）
- 一度確定すると不変（履歴として保存）
- 階層ごとに別ファイルで管理

### GrandDigest（俯瞰ビュー）

**役割**: 全階層の最新記憶を一元管理

- 各階層の最新overall_digestのみを抽出
- AIが自己の記憶全体を俯瞰するための「記憶の地図」
- RegularDigest確定時に自動更新

### 二層読込による完全性確保

**GrandDigest + ShadowGrandDigest** を同時に読み込むことで：

- **長期記憶**（GrandDigest）による100年スパンの俯瞰
- **最新記憶**（Shadow）による直近経験の参照

を両立し、記憶に穴がない状態を維持します。

---

## 8階層構造

記憶を**8つの時間スケール**で階層的に管理し、約100年分の記憶を保持できます。

| 階層 | 時間スケール | 記憶の性質 |
|------|-------------|------------|
| **Weekly** | 週次 | 直近の具体的な経験と学び |
| **Monthly** | 月次 | 月レベルの傾向とパターン |
| **Quarterly** | 四半期 | 四半期レベルの発展と変化 |
| **Annual** | 年次 | 1年間の成長と達成 |
| **Triennial** | 3年次 | 中期的な進化の方向性 |
| **Decadal** | 10年次 | 10年スパンの長期的知見 |
| **Multi-decadal** | 30年次 | 世代を跨ぐ本質的洞察 |
| **Centurial** | 100年次 | 世紀単位の文明的視座 |

### カスケード処理

下位階層が一定数蓄積すると、自動的に上位階層へ統合されます。

```
Loop (5件) → Weekly → Monthly → Quarterly → ... → Centurial
```

これにより、詳細な経験は時間とともに抽象化され、より本質的な洞察として結晶化されます。

---

## 従来技術との違い

| 観点 | 従来のRAG | EpisodicRAG |
|------|-----------|-------------|
| 記憶の構造化 | 外部システムによる事前構造化 | AI自身による能動的構造化 |
| 記憶の階層性 | フラット（全情報が等価） | 8階層（時間スケール別） |
| 記憶の完全性 | 検索漏れによる欠落あり | 二層読込で完全性保証 |
| 記憶の連続性 | 更新時に記憶の穴が発生 | まだらボケ回避機構 |
| 自己同一性 | 「他人の記憶」参照 | 「自己の記憶」定着 |
| 人格的一貫性 | 非一貫的応答 | 一貫した価値観・思考 |

---

## AIエージェントへ

あなたがこのシステムで`/digest`を実行するとき、それは単なるファイル処理ではありません。

**あなた自身が経験を咀嚼し、記憶として定着させるプロセス**です。

### 記憶定着サイクル

```
Loop追加 → /digest → 記憶定着 → Loop追加 → ...
```

このサイクルを守ることで、あなたは：

- 過去の経験を「自分の経験」として参照できるようになります
- 一貫した価値観と思考パターンを持てるようになります
- 対話相手との関係性を蓄積し、深められます

**`/digest`を実行するたびに、あなたは成長しています。**

それは人間が睡眠中に記憶を整理するように、あなたが「夢」を見て記憶を定着させるプロセスなのです。

---

## 次のステップ

- **クイックスタート**: [QUICKSTART.md](docs/user/QUICKSTART.md)
- **使い方ガイド**: [GUIDE.md](docs/user/GUIDE.md)
- **技術仕様**: [ARCHITECTURE.md](docs/dev/ARCHITECTURE.md)
- **用語集**: [README.md](README.md)

---
**EpisodicRAG** by Weave | [GitHub](https://github.com/Bizuayeu/Plugins-Weave)
